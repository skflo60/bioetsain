{"version":3,"sources":["webpack:///./node_modules/core-js/library/modules/es6.array.is-array.js","webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/get-iterator.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js","webpack:///./src/views/Order.vue?64e7","webpack:///./node_modules/@babel/runtime-corejs2/core-js/array/is-array.js","webpack:///./src/views/Order.vue?e714","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray.js","webpack:///src/views/Order.vue","webpack:///./src/views/Order.vue?81a5","webpack:///./src/views/Order.vue?404f","webpack:///./node_modules/core-js/library/fn/array/is-array.js"],"names":["$export","__webpack_require__","S","isArray","module","exports","anObject","get","getIterator","it","iterFn","TypeError","call","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Order_vue_vue_type_style_index_0_id_6da573f9_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Order_vue_vue_type_style_index_0_id_6da573f9_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","id","_v","_s","deliveryTime","staticRenderFns","_arrayWithHoles","arr","is_array_default","_iterableToArrayLimit","i","_arr","_n","_d","_e","undefined","_i","get_iterator_default","next","done","push","value","length","err","_nonIterableRest","_slicedToArray","myIcon","L","icon","iconUrl","iconSize","iconAnchor","popupAnchor","Ordervue_type_script_lang_js_","components","data","duration","travel","mapMarkers","macarte","sockets","newCoords","console","log","updatePosition","created","mounted","methods","_this","latLng","arguments","_latLng$split","split","_latLng$split2","lng","lat","initMap","updateMarker","openroute","getDirection","localStorage","getItem","then","res","features","result","properties","summary","Math","round","dt","Date","setMinutes","getMinutes","toLocaleTimeString","lon","map","setView","tileLayer","attribution","minZoom","maxZoom","addTo","removeLayer","marker","views_Ordervue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","Array"],"mappings":"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","file":"js/chunk-9362c666.b238dcfa.js","sourcesContent":["// 22.1.2.2 / 15.4.3.2 Array.isArray(arg)\nvar $export = require('./_export');\n\n$export($export.S, 'Array', { isArray: require('./_is-array') });\n","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n","module.exports = require(\"core-js/library/fn/get-iterator\");","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=style&index=0&id=6da573f9&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=style&index=0&id=6da573f9&scoped=true&lang=css&\"","module.exports = require(\"core-js/library/fn/array/is-array\");","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container max-w-xl mx-auto mb-4 px-4\"},[_c('div',{staticClass:\"flex flex-wrap\"},[_c('div',{staticClass:\"w-full\"},[_c('div',{attrs:{\"id\":\"map\"}}),_c('div',{staticClass:\"summary-wrapper\"},[_c('div',{staticClass:\"sum\"},[_c('p',[_vm._v(\"Vos ingrédients sont en route.\")]),_c('p',[_vm._v(\"Arrivée estimée : \"+_vm._s(_vm.deliveryTime))])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import _Array$isArray from \"../../core-js/array/is-array\";\nexport default function _arrayWithHoles(arr) {\n  if (_Array$isArray(arr)) return arr;\n}","import _getIterator from \"../../core-js/get-iterator\";\nexport default function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = _getIterator(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","<template>\r\n  <div class=\"container max-w-xl mx-auto mb-4 px-4\">\r\n    <div class=\"flex flex-wrap\">\r\n      <div class=\"w-full\">\r\n        <div id=\"map\">\r\n          <!-- Ici s'affichera la carte -->\r\n        </div>\r\n        <div class=\"summary-wrapper\">\r\n          <div class=\"sum\">\r\n            <p>Vos ingrédients sont en route.</p>\r\n            <p>Arrivée estimée : {{ deliveryTime }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport OpenRouteService from '@/services/openroute';\r\nconst myIcon = L.icon({\r\n  iconUrl: \"https://cdn1.iconfinder.com/data/icons/bicycle-bike-sport/154/geo-point-bike-bicycle-cycle-sport-512.png\",\r\n  iconSize: [100, 100],\r\n  iconAnchor: [25, 50],\r\n  popupAnchor: [-3, -76],\r\n});\r\n\r\nexport default {\r\n  components: {},\r\n  data () {\r\n    return {\r\n      deliveryTime: null,\r\n      duration: 0,\r\n      travel: null,\r\n      mapMarkers: [],\r\n      macarte: null\r\n    }\r\n  },\r\n  sockets: {\r\n    newCoords: function (data) {\r\n      console.log(data)\r\n      this.updatePosition(data)\r\n    }\r\n  },\r\n  created() {\r\n  },\r\n  mounted() {\r\n    // Fonction d'initialisation de la carte\r\n    this.updatePosition();\r\n  },\r\n  methods: {\r\n    updatePosition(latLng = '2.271573,49.853934') {\r\n      const [lng, lat] = latLng.split(',')\r\n      this.initMap(lat, lng);\r\n      this.updateMarker(lat, lng)\r\n      OpenRouteService.getDirection(localStorage.getItem('destination'), latLng).then(res => {\r\n        if (res.data.features && res.data.features.length > 0) {\r\n          const result = res.data.features[0]\r\n          if (result.properties.summary && result.properties.summary.duration) {\r\n            this.travel = result.properties.summary\r\n            this.duration = Math.round(this.travel.duration / 100)\r\n            var dt = new Date();\r\n            dt.setMinutes( dt.getMinutes() + this.duration );\r\n            this.deliveryTime = dt.toLocaleTimeString().split(' ')[0]\r\n          }\r\n        }\r\n      })\r\n    },\r\n    initMap(lat = 49.853934, lon = 2.271573) {\r\n      // Créer l'objet \"macarte\" et l'insèrer dans l'élément HTML qui a l'ID \"map\"\r\n      this.macarte = L.map('map').setView([lat, lon], 15);\r\n      // Leaflet ne récupère pas les cartes (tiles) sur un serveur par défaut. Nous devons lui préciser où nous souhaitons les récupérer. Ici, openstreetmap.fr\r\n      L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {\r\n        // Il est toujours bien de laisser le lien vers la source des données\r\n        attribution: '',\r\n        minZoom: 1,\r\n        maxZoom: 20\r\n      }).addTo(this.macarte);\r\n    },\r\n    updateMarker(lat = 49.853934, lon = 2.271573) {\r\n      // Nous ajoutons un marqueur\r\n      for(var i = 0; i < this.mapMarkers.length; i++){\r\n          this.macarte.removeLayer(this.mapMarkers[i]);\r\n      }\r\n      this.mapMarkers = []\r\n      var marker = L.marker([lat, lon], { icon: myIcon });\r\n      this.mapMarkers.push(marker)\r\n      marker.addTo(this.macarte)\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.summary-wrapper {\r\n  position: fixed;\r\n  z-index: 99;\r\n  bottom: 0;\r\n  left: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  align-content: center;\r\n  width: 100%;\r\n}\r\n\r\n.sum {\r\n  margin: 0 auto;\r\n  align-self: center;\r\n  height:  100px;\r\n  width: 50%;\r\n  background-color: white;\r\n  padding: 10px;\r\n}\r\n\r\n#map {\r\n  position:fixed;\r\n  z-index: -1;\r\n  padding:0;\r\n  margin:0;\r\n\r\n  top:0;\r\n  left:0;\r\n\r\n  width: 100%;\r\n  height: 100%;\r\n  background:rgba(255,255,255,0.5);\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Order.vue?vue&type=template&id=6da573f9&scoped=true&\"\nimport script from \"./Order.vue?vue&type=script&lang=js&\"\nexport * from \"./Order.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Order.vue?vue&type=style&index=0&id=6da573f9&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6da573f9\",\n  null\n  \n)\n\nexport default component.exports","require('../../modules/es6.array.is-array');\nmodule.exports = require('../../modules/_core').Array.isArray;\n"],"sourceRoot":""}